#!/bin/vash

# If config is mounted to /pxls.conf, move it to workdir
if [[ -f /pxls.conf ]]; then
	echo "Custom Pxls Config File Detected, Using that"
	cp /pxls.conf ./pxls.conf
else

	echo "No manual config detected, running in Standalone Mode"
        cp resources/reference.conf /data/pxls.conf
        cp resources/roles-reference.conf /data/roles.conf
        cp resources/palette-reference.conf /data/palette.conf

	generated_password=$(head /dev/urandom | tr -dc A-Za-z0-9 | head -c10)

	sed -i -e 's/user\:\ \"\"/user\:\ \"pxls\"/' data/pxls.conf
	sed -i -e 's/pass\:\ \"\"/pass\:\ \"\"${generated_password}"\"/' data/pxls.conf
	sed -i -e 's/url\:\ \"\"/url\:\ \"\"${generated_password}"\"/' data/pxls.conf
        
fi
